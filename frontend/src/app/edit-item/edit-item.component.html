<!-- {{pendingProduct['title']}} -->

<div class="header-row">
  <div class="page-header">Pending post item:</div>
</div>
<div class="item-page-container">
  <div class="item-page-left">
    <form [formGroup]="editForm">
      <div class="item-cont">
        <p>Title</p>
        <textarea
          class="page-item-title"
          placeholder="Enter title here"
          formControlName="title"
          rows="3"
          >{{ title }}</textarea
        >
        <button type="button" class="special-btn" (click)="makeTitle()">
          Generate
        </button>
      </div>

      <div class="item-cont">
        <p>Description</p>
        <textarea
          class="page-item"
          placeholder="Enter your description here"
          formControlName="content"
          rows="5"
        ></textarea>
        <button type="button" class="special-btn" (click)="makeDescription()">
          Generate
        </button>
      </div>
      <mat-card>
        <mat-form-field class="example-chip-list" appearance="fill">
          <mat-label>Tags</mat-label>
          <mat-chip-list #chipList1 aria-label="Tags selection">
            <mat-chip *ngFor="let tag of tags" (removed)="removeTag(tag)">
              {{ tag }}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
            <input
              placeholder="New Tag..."
              #tagInput
              [formControl]="tagCtrl"
              [matAutocomplete]="auto1"
              [matChipInputFor]="chipList1"
              [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              (matChipInputTokenEnd)="addTag($event)"
            />
          </mat-chip-list>
          <mat-autocomplete
            #auto1="matAutocomplete"
            (optionSelected)="selectedTag($event)"
          >
            <mat-option
              id="tags-options"
              *ngFor="let tag of filteredTags | async"
              [value]="tag"
            >
              {{ tag }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <button
          mat-stroked-button
          id="generate-tags-btn"
          (click)="makeTag()"
          color="primary"
          style="border-radius: 15px"
        >
          <div style="display: flex; margin: 10px 0px">
            <span style="margin-right: 10px">Generate</span>

            <mat-progress-spinner
              *ngIf="genTagsLoading"
              class="example-margin"
              color="primary"
              mode="indeterminate"
              value="50"
              diameter="30"
            >
            </mat-progress-spinner>
            <mat-icon
              aria-hidden="false"
              aria-label="Example home icon"
              fontIcon="tick"
            ></mat-icon>
          </div>
        </button>
      </mat-card>

      <mat-card>
        <mat-form-field class="example-chip-list" appearance="fill">
          <mat-label>Categories</mat-label>
          <mat-chip-list #chipList2 aria-label="Categories selection">
            <mat-chip
              *ngFor="let category of categories"
              (removed)="removeCategory(category)"
            >
              {{ category }}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
            <input
              placeholder="New Category..."
              #categoryInput
              [formControl]="categoryCtrl"
              [matAutocomplete]="auto2"
              [matChipInputFor]="chipList2"
              [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              (matChipInputTokenEnd)="addCategory($event)"
            />
          </mat-chip-list>
          <mat-autocomplete
            #auto2="matAutocomplete"
            (optionSelected)="selectedCategory($event)"
          >
            <mat-option
              id="categories-options"
              *ngFor="let category of filteredCategories | async"
              [value]="category"
            >
              {{ category }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <button
          type="button"
          class="primary primary-btn"
          id="generate-categories-btn"
          (click)="makeCategory()"
        >
          Generate
        </button>
        <button
          mat-stroked-button
          id="generate-tags-btn"
          (click)="makeCategory()"
          color="primary"
          style="border-radius: 15px"
        >
          <div style="display: flex; margin: 10px 0px">
            <span style="margin-right: 10px">Generate</span>

            <mat-progress-spinner
              *ngIf="genCategoriesLoading"
              class="example-margin"
              color="primary"
              mode="indeterminate"
              value="50"
              diameter="30"
            >
            </mat-progress-spinner>
          </div>
        </button>
      </mat-card>

      <div class="item-cont">
        <p>Start Date</p>
        <textarea
          class="page-item-date"
          id="startText"
          placeholder="Promotional Start Date"
          formControlName="startDate"
          rows="3"
        ></textarea>
        <button
          type="button"
          class="special-btn"
          id="startGen"
          (click)="getMinOrMaxDates('min')"
        >
          Generate
        </button>
      </div>
      <div class="item-cont">
        <p>End Date</p>
        <textarea
          class="page-item-date"
          id="endText"
          placeholder="Promotional End Date"
          formControlName="endDate"
          rows="3"
        ></textarea>
        <button
          type="button"
          class="special-btn"
          id="endGen"
          (click)="getMinOrMaxDates('max')"
        >
          Generate
        </button>
      </div>
    </form>

    <div class="cv-scan">
      <button type="button" class="special-btn2" (click)="popup = true">
        Generate CV image
      </button>
      <div class="overlay" *ngIf="popup">
        <div class="popup">
          <img src="../../assets/pictures/mon.gif" alt="CV image" />
          <a class="close" (click)="popup = false">&times;</a>
        </div>
      </div>
    </div>
  </div>

  <div class="item-page-right">
    <img [src]="pendingProduct.images" alt="IMAGE" class="product-img" />
    <div class="page-item-description">
      <textarea>

          {{ pendingProduct["content"] }}
        </textarea
      >
    </div>
  </div>
</div>
<div class="item-page-btn-container">
  <button
    type="button"
    class="btn btn-danger"
    style="margin-right: 20px"
    (click)="deletePost(pendingProduct.id)"
  >
    Delete Post
  </button>
  <button
    type="button"
    class="btn btn-primary item-page-btn"
    id="back-to-pending"
    (click)="onPending()"
  >
    Back to Pending Page
  </button>
  <button
    type="button"
    class="btn btn-primary item-page-btn"
    id="go-to-live"
    (click)="onProcessed()"
  >
    Submit
  </button>
</div>
